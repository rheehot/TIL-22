<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>POST로 AJAX 처리하기 | Today I Learned</title>
    <meta name="description" content="Today I Learned generated by vuepress">
    <link rel="icon" href="/TIL/logo.png">
    
    <link rel="preload" href="/TIL/assets/css/styles.a0b80c8a.css" as="style"><link rel="preload" href="/TIL/assets/js/app.a0b80c8a.js" as="script"><link rel="preload" href="/TIL/assets/js/119.fb4538df.js" as="script"><link rel="prefetch" href="/TIL/assets/js/1.9ab86819.js"><link rel="prefetch" href="/TIL/assets/js/10.dd0f7904.js"><link rel="prefetch" href="/TIL/assets/js/100.40f6cc15.js"><link rel="prefetch" href="/TIL/assets/js/101.be787656.js"><link rel="prefetch" href="/TIL/assets/js/102.39886a7c.js"><link rel="prefetch" href="/TIL/assets/js/103.e03e9ba7.js"><link rel="prefetch" href="/TIL/assets/js/104.8d4fd38a.js"><link rel="prefetch" href="/TIL/assets/js/105.3736ad1a.js"><link rel="prefetch" href="/TIL/assets/js/106.6526d3dc.js"><link rel="prefetch" href="/TIL/assets/js/107.d8554672.js"><link rel="prefetch" href="/TIL/assets/js/108.fccaa6c1.js"><link rel="prefetch" href="/TIL/assets/js/109.3d16fe41.js"><link rel="prefetch" href="/TIL/assets/js/11.6b2ba95b.js"><link rel="prefetch" href="/TIL/assets/js/110.f15892db.js"><link rel="prefetch" href="/TIL/assets/js/111.410cf4c4.js"><link rel="prefetch" href="/TIL/assets/js/112.197ec2a9.js"><link rel="prefetch" href="/TIL/assets/js/113.44651093.js"><link rel="prefetch" href="/TIL/assets/js/114.6605fb5b.js"><link rel="prefetch" href="/TIL/assets/js/115.cfcdbd3e.js"><link rel="prefetch" href="/TIL/assets/js/116.6d7268dd.js"><link rel="prefetch" href="/TIL/assets/js/117.c93e9195.js"><link rel="prefetch" href="/TIL/assets/js/118.17109fe7.js"><link rel="prefetch" href="/TIL/assets/js/12.15e52937.js"><link rel="prefetch" href="/TIL/assets/js/120.882bc2af.js"><link rel="prefetch" href="/TIL/assets/js/121.f9348535.js"><link rel="prefetch" href="/TIL/assets/js/122.2727fae8.js"><link rel="prefetch" href="/TIL/assets/js/13.e36a5f3a.js"><link rel="prefetch" href="/TIL/assets/js/14.9c0dfd88.js"><link rel="prefetch" href="/TIL/assets/js/15.185a2998.js"><link rel="prefetch" href="/TIL/assets/js/16.d360003f.js"><link rel="prefetch" href="/TIL/assets/js/17.88877e9e.js"><link rel="prefetch" href="/TIL/assets/js/18.f84b899c.js"><link rel="prefetch" href="/TIL/assets/js/19.85fab7f4.js"><link rel="prefetch" href="/TIL/assets/js/2.79eeef1b.js"><link rel="prefetch" href="/TIL/assets/js/20.0db94371.js"><link rel="prefetch" href="/TIL/assets/js/21.9dfe7c6d.js"><link rel="prefetch" href="/TIL/assets/js/22.f71dd2b3.js"><link rel="prefetch" href="/TIL/assets/js/23.7e0e8b87.js"><link rel="prefetch" href="/TIL/assets/js/24.e082d4ae.js"><link rel="prefetch" href="/TIL/assets/js/25.681db0a6.js"><link rel="prefetch" href="/TIL/assets/js/26.ba06f780.js"><link rel="prefetch" href="/TIL/assets/js/27.2fee0b30.js"><link rel="prefetch" href="/TIL/assets/js/28.d8446dda.js"><link rel="prefetch" href="/TIL/assets/js/29.5b778755.js"><link rel="prefetch" href="/TIL/assets/js/3.7a2d0b2d.js"><link rel="prefetch" href="/TIL/assets/js/30.77816c3c.js"><link rel="prefetch" href="/TIL/assets/js/31.0df73aa6.js"><link rel="prefetch" href="/TIL/assets/js/32.d88858e8.js"><link rel="prefetch" href="/TIL/assets/js/33.3ce1fa7b.js"><link rel="prefetch" href="/TIL/assets/js/34.3f75677d.js"><link rel="prefetch" href="/TIL/assets/js/35.f4581c5b.js"><link rel="prefetch" href="/TIL/assets/js/36.81640f6b.js"><link rel="prefetch" href="/TIL/assets/js/37.0f7dce12.js"><link rel="prefetch" href="/TIL/assets/js/38.82486f98.js"><link rel="prefetch" href="/TIL/assets/js/39.3cf50791.js"><link rel="prefetch" href="/TIL/assets/js/4.6b865b96.js"><link rel="prefetch" href="/TIL/assets/js/40.36a4bf1a.js"><link rel="prefetch" href="/TIL/assets/js/41.a3836645.js"><link rel="prefetch" href="/TIL/assets/js/42.cad164fa.js"><link rel="prefetch" href="/TIL/assets/js/43.75596ee2.js"><link rel="prefetch" href="/TIL/assets/js/44.531a38bc.js"><link rel="prefetch" href="/TIL/assets/js/45.1aa4c089.js"><link rel="prefetch" href="/TIL/assets/js/46.0fe742c4.js"><link rel="prefetch" href="/TIL/assets/js/47.6eccedff.js"><link rel="prefetch" href="/TIL/assets/js/48.de53d8b2.js"><link rel="prefetch" href="/TIL/assets/js/49.a4ec3a76.js"><link rel="prefetch" href="/TIL/assets/js/5.6ed78b5f.js"><link rel="prefetch" href="/TIL/assets/js/50.8ff39ced.js"><link rel="prefetch" href="/TIL/assets/js/51.99f5abfc.js"><link rel="prefetch" href="/TIL/assets/js/52.bbfa644f.js"><link rel="prefetch" href="/TIL/assets/js/53.bc79d6c1.js"><link rel="prefetch" href="/TIL/assets/js/54.d683f1b5.js"><link rel="prefetch" href="/TIL/assets/js/55.80ec739f.js"><link rel="prefetch" href="/TIL/assets/js/56.d0218b55.js"><link rel="prefetch" href="/TIL/assets/js/57.66ad6204.js"><link rel="prefetch" href="/TIL/assets/js/58.ecda4680.js"><link rel="prefetch" href="/TIL/assets/js/59.4f9976ef.js"><link rel="prefetch" href="/TIL/assets/js/6.087bae3c.js"><link rel="prefetch" href="/TIL/assets/js/60.ebb90406.js"><link rel="prefetch" href="/TIL/assets/js/61.9d5c15d2.js"><link rel="prefetch" href="/TIL/assets/js/62.92f9e4f1.js"><link rel="prefetch" href="/TIL/assets/js/63.78c107d4.js"><link rel="prefetch" href="/TIL/assets/js/64.c3e0938c.js"><link rel="prefetch" href="/TIL/assets/js/65.f4592ade.js"><link rel="prefetch" href="/TIL/assets/js/66.5c7de3e6.js"><link rel="prefetch" href="/TIL/assets/js/67.d81cd932.js"><link rel="prefetch" href="/TIL/assets/js/68.fe3b64b5.js"><link rel="prefetch" href="/TIL/assets/js/69.64debd15.js"><link rel="prefetch" href="/TIL/assets/js/7.c48e6a9e.js"><link rel="prefetch" href="/TIL/assets/js/70.53a174df.js"><link rel="prefetch" href="/TIL/assets/js/71.1d14a4b6.js"><link rel="prefetch" href="/TIL/assets/js/72.189b786d.js"><link rel="prefetch" href="/TIL/assets/js/73.a38dbae5.js"><link rel="prefetch" href="/TIL/assets/js/74.f8a67d4e.js"><link rel="prefetch" href="/TIL/assets/js/75.6dccd8ee.js"><link rel="prefetch" href="/TIL/assets/js/76.490259a4.js"><link rel="prefetch" href="/TIL/assets/js/77.b798ee18.js"><link rel="prefetch" href="/TIL/assets/js/78.ee431490.js"><link rel="prefetch" href="/TIL/assets/js/79.cfa4e41a.js"><link rel="prefetch" href="/TIL/assets/js/8.ba1008e3.js"><link rel="prefetch" href="/TIL/assets/js/80.414d4188.js"><link rel="prefetch" href="/TIL/assets/js/81.4952aa68.js"><link rel="prefetch" href="/TIL/assets/js/82.33b8c92b.js"><link rel="prefetch" href="/TIL/assets/js/83.bba741d3.js"><link rel="prefetch" href="/TIL/assets/js/84.fd98c962.js"><link rel="prefetch" href="/TIL/assets/js/85.a7ab5a6f.js"><link rel="prefetch" href="/TIL/assets/js/86.1c51fbed.js"><link rel="prefetch" href="/TIL/assets/js/87.8de48414.js"><link rel="prefetch" href="/TIL/assets/js/88.5de787dd.js"><link rel="prefetch" href="/TIL/assets/js/89.db82dfac.js"><link rel="prefetch" href="/TIL/assets/js/9.639b908f.js"><link rel="prefetch" href="/TIL/assets/js/90.02d62c42.js"><link rel="prefetch" href="/TIL/assets/js/91.d2a2d6f4.js"><link rel="prefetch" href="/TIL/assets/js/92.f6396ef5.js"><link rel="prefetch" href="/TIL/assets/js/93.c2e14a42.js"><link rel="prefetch" href="/TIL/assets/js/94.2419c6c0.js"><link rel="prefetch" href="/TIL/assets/js/95.16f6dd19.js"><link rel="prefetch" href="/TIL/assets/js/96.2c9f19aa.js"><link rel="prefetch" href="/TIL/assets/js/97.ff7ae773.js"><link rel="prefetch" href="/TIL/assets/js/98.89fccb76.js"><link rel="prefetch" href="/TIL/assets/js/99.d71b8218.js">
    <link rel="stylesheet" href="/TIL/assets/css/styles.a0b80c8a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/TIL/" class="home-link router-link-active"><!----><span class="site-name">
      Today I Learned
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/taegon/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://code.taegon.kr/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/taegon/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://code.taegon.kr/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>1. Bookmarks</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/TIL/bookmark/blog-2020.html" class="sidebar-link">괜찮은 글 모음 (타임라인, 2020년)</a></li><li><a href="/TIL/bookmark/blog.html" class="sidebar-link">괜찮은 글 모음 (타임라인)</a></li><li><a href="/TIL/bookmark/programming.html" class="sidebar-link">프로그래밍 관련 북마크</a></li><li><a href="/TIL/bookmark/machine-learning.html" class="sidebar-link">머신 러닝 관련 북마크</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2. Python</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="post로-ajax-처리하기"><a href="#post로-ajax-처리하기" aria-hidden="true" class="header-anchor">#</a> POST로 AJAX 처리하기</h1><h2 id="tl-dr"><a href="#tl-dr" aria-hidden="true" class="header-anchor">#</a> tl;dr</h2><ul><li>jquery를 이용하면 쉽게 구현할 수 있다.</li><li>서버측에서 출력값이 리턴값이 되며, 포맷을 맞춰주면 된다.</li><li>시행착오가 있었지만 잘된다.</li></ul><h2 id="배경"><a href="#배경" aria-hidden="true" class="header-anchor">#</a> 배경</h2><p>프로젝트 사이트에서 메시지를 남기면 메일로 쏴주는 기능을 구현중인데, 원페이지 사이트라서 페이지 리프레시가 없도록 ajax로 구현하였다. 제출 버튼 클릭시 정보를 post로 쏴주고 (텍스트가 길어서 post로 보내도록 했다), 정상적으로 메시지가 보내지고 나면, 제출 완료 창이 떠서 피드백을 줄 수 있도록 구현하였다.</p><h2 id="사용예"><a href="#사용예" aria-hidden="true" class="header-anchor">#</a> 사용예</h2><p>아래링크를 참고하자.</p><ul><li><a href="http://rocabilly.tistory.com/27" target="_blank" rel="noopener noreferrer">jquery-ajax 방법<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by 도깨비방망이</li></ul><p>서버쪽 리턴코드</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Send the message</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$mailer</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token single-quoted-string string">'{&quot;status&quot;:&quot;ok&quot;, &quot;message&quot;:&quot;Thank you. '</span><span class="token punctuation">.</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token double-quoted-string string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'. Sent message successfully.&quot;}'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token single-quoted-string string">'{&quot;status&quot;:&quot;error&quot;, &quot;message&quot;:&quot;I am sure, your configuration are not correct. :(&quot;}'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>클라이언트쪽 호출코드</p><div class="language-javascript extra-class"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;HOMEPAGE_URL/send_feedback.php&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> name<span class="token punctuation">,</span> email<span class="token operator">:</span> email<span class="token punctuation">,</span> message<span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><p>뒤에 json은 리턴파일의 포맷인데, 출력이 제대로 되지 않으면, 해당 파라미터를 생략하고, raw 데이터를 찍어서 확인하면서 해결했다.</p></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/TIL/assets/js/app.a0b80c8a.js" defer></script><script src="/TIL/assets/js/119.fb4538df.js" defer></script>
  </body>
</html>
